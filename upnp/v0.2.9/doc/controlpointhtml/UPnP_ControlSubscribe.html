<html>
<head>
<title> EBS UPnP Library Reference </title>
</head>
<body bgcolor=#bbbbbb>

<style>
HR { visibility: hidden }
A:visited { color: #a43; }
A:link { color: #14a; }
IMG:link { border: none; }
PRE { background-color: #d9e0e3; font-size: 8pt; }

</style>

<table border=0 cellpadding=5 cellspacing=0 width=750>
<tr><td>
<div style='
	border: 1px solid black;
	background-color: white;
	background-image: URL("background_small.jpeg");
	background-repeat: repeat-x;'>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td valign=top rowspan=3 width=45><a href='index.html'><img src='sidebar.jpg' border=0></a></td>
<td colspan=2 height=8>&nbsp;</td>
</tr>
<tr>
<td style='font-family: arial narrow, arial, sans-serif; ' width=747>

<H2>int <A HREF="#DOC.DOCU">UPnP_ControlSubscribe</A></H2><H2>( UPnPControlDeviceHandle deviceHandle,<BR>&nbsp;  UPNP_CHAR* serviceId,<BR>&nbsp;  UPNP_INT32 timeoutSec,<BR>&nbsp;  void* userData,<BR>&nbsp;  UPNP_BOOL waitForCompletion )</H2><BLOCKQUOTE>Subscribe to a service or renew a subscription </BLOCKQUOTE>

<A NAME="DOC.DOCU"></A>
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE>
Subscribes to a service on a remote device to receive notifications
when the service's state changes.  If the control point is already
subscribed to the given service, this function has the effect of
renewing the existing subscription for the given period of time.

<P>If waitForCompletion is UPNP_TRUE, this function will wait until the
subscription request has been either accepted or rejected.  Otherwise
it returns immediately and a UPNP_CONTROL_EVENT_SUBSCRIPTION_ACCEPTED
or UPNP_CONTROL_EVENT_SUBSCRIPTION_REJECTED event is generated once
the device responds.

<P>Once the control point is subscribed to service,
UPNP_CONTROL_EVENT_SERVICE_STATE_UPDATE	events may be generated to
indicate the service's state has been updated. If such a notification
is dropped, a UPNP_CONTROL_EVENT_SUBSCRIPTION_OUT_OF_SYNC event will be
sent to the control point, which gives the application the opportunity
to indicate through the callback return value whether to drop the
subscription or attempt to re-subscribe.  If the application chooses to
re-subscribe (synchronize), a UPNP_CONTROL_EVENT_SYNCHRONIZE_FAILED
event may be generated, if the synchronization fails.  If the
UPNP_CONTROL_EVENT_SYNCHRONIZE_FAILED is not handled by the control
point callback, the default action is to try to synchronize the
subscription by re-subscribing.

<P>When the subscription is close to expiring, the control point will
receive a UPNP_CONTROL_EVENT_SUBSCRIPTION_NEAR_EXPIRATION event, to
give the application a chance to renew the subscription.

<P>Once subscription expires, a UPNP_CONTROL_EVENT_SUBSCRIPTION_EXPIRED
event is sent to the control point.

<P>Generates:
UPNP_CONTROL_EVENT_SUBSCRIPTION_ACCEPTED,
UPNP_CONTROL_EVENT_SUBSCRIPTION_REJECTED,
UPNP_CONTROL_EVENT_SERVICE_STATE_UPDATE,
UPNP_CONTROL_EVENT_SUBSCRIPTION_OUT_OF_SYNC,
UPNP_CONTROL_EVENT_SYNCHRONIZE_FAILED,
UPNP_CONTROL_EVENT_SUBSCRIPTION_NEAR_EXPIRATION,
UPNP_CONTROL_EVENT_SUBSCRIPTION_EXPIRED

<P></BLOCKQUOTE>
<DL><DT><DT><B>Parameters:</B><DD><B>deviceHandle</B> -   handle returned by \Ref
{<!1><A HREF="UPnP_ControlOpenDevice.html">UPnP_ControlOpenDevice</A>} 
<BR><B>serviceId</B> -   id of service to subscribe
to 
<BR><B>timeoutSec</B> -   duration in seconds for the
subscription 
<BR><B>userData</B> -   passed to callback as
userRequestData for generated
events 
<BR><B>waitForCompletion</B> -   see above description <BR><DT><B>Returns:</B><DD>  error code
<BR><DT><B>See Also:</B><DD><!1><A HREF="UPnP_ControlUnsubscribe.html">UPnP_ControlUnsubscribe</A>, <!1><A HREF="APIReference.html#DOC.1.1.36">UPnP_ControlSubscribedToService</A>
<BR><DD></DL><P><P><I><A HREF="index.html">Alphabetic index</A></I></P><HR>
</td>
<td rowspan=2 width=8>&nbsp;</td>
</tr>
<tr>
<td>
<center><img border=0 src='centerline.gif'></center><br>
<i>Copyright EBS Inc, 1993-2005.<br>All rights reserved.<br>
This document may not be redistributed in any form without the consent of EBS, Inc.</i><br>
<font size=-1 face=arial><a href='http://www.ebsembeddedsoftware.com' target=_blank>www.ebsembeddedsoftware.com</a></font>
</td>
</tr>
<tr>
<td height=8 colspan=2>&nbsp;</td>
</tr>

</table>
</div>
</tr></td></table>